<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ | –°–∏–±–ì–ò–£</title>
    <link rel="stylesheet" href="new.css">
    
</head>
<body>
    <!-- –®–∞–ø–∫–∞ -->
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <div class="logo-placeholder">–°–ì–ò–£</div>
                <div class="logo-text">
                    <div class="university-name">–°–∏–±–∏—Ä—Å–∫–∏–π –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω–¥—É—Å—Ç—Ä–∏–∞–ª—å–Ω—ã–π —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç</div>
                    <div class="project-name">–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</div>
                </div>
            </div>
            <nav class="nav">
                <span style="color: var(--white);">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</span>
                <a href="index.html" class="btn-secondary nav-btn">–ù–∞ —Å–∞–π—Ç</a>
                <a href="#" id="logoutBtn" class="btn-secondary nav-btn">–í—ã–π—Ç–∏</a>
            </nav>
        </div>
    </header>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç –∞–¥–º–∏–Ω–∫–∏ -->
    <main class="admin-container">
        <div class="admin-header">
            <h1>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–ø—Ä–æ—Å–∞–º–∏</h1>
            <button class="btn" onclick="showSection('create-poll')">+ –°–æ–∑–¥–∞—Ç—å –æ–ø—Ä–æ—Å</button>
        </div>

        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
        <div class="admin-nav">
            <button class="admin-nav-btn active" onclick="showSection('dashboard')">–î–∞—à–±–æ—Ä–¥</button>
            <button class="admin-nav-btn" onclick="showSection('polls')">–í—Å–µ –æ–ø—Ä–æ—Å—ã</button>
            <button class="admin-nav-btn" onclick="showSection('create-poll')">–°–æ–∑–¥–∞—Ç—å –æ–ø—Ä–æ—Å</button>
            <button class="admin-nav-btn" onclick="showSection('statistics')">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</button>
        </div>

        <!-- –î–∞—à–±–æ—Ä–¥ -->
        <section id="dashboard" class="admin-section active">
            <h2>–û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number">12</div>
                    <div>–ê–∫—Ç–∏–≤–Ω—ã—Ö –æ–ø—Ä–æ—Å–æ–≤</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">1,247</div>
                    <div>–í—Å–µ–≥–æ –æ—Ç–≤–µ—Ç–æ–≤</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">84%</div>
                    <div>–ó–∞–≤–µ—Ä—à–µ–Ω–æ –æ–ø—Ä–æ—Å–æ–≤</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">15</div>
                    <div>–ù–æ–≤—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤</div>
                </div>
            </div>

            <h3>–ü–æ—Å–ª–µ–¥–Ω–∏–µ –æ–ø—Ä–æ—Å—ã</h3>
            <div class="polls-list">
                <div class="poll-item">
                    <div>
                        <strong>–£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ–º –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è</strong>
                        <div>üìä 245 –æ—Ç–≤–µ—Ç–æ–≤ ‚Ä¢ –ê–∫—Ç–∏–≤–µ–Ω –¥–æ 25.12.2024</div>
                    </div>
                    <div class="poll-actions">
                        <button class="btn btn-small">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</button>
                        <button class="btn btn-secondary btn-small">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
                    </div>
                </div>
                <div class="poll-item">
                    <div>
                        <strong>–û—Ü–µ–Ω–∫–∞ –±–∏–±–ª–∏–æ—Ç–µ—á–Ω—ã—Ö —É—Å–ª—É–≥</strong>
                        <div>üìä 189 –æ—Ç–≤–µ—Ç–æ–≤ ‚Ä¢ –ó–∞–≤–µ—Ä—à–µ–Ω</div>
                    </div>
                    <div class="poll-actions">
                        <button class="btn btn-small">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</button>
                        <button class="btn btn-secondary btn-small">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- –í—Å–µ –æ–ø—Ä–æ—Å—ã -->
        <section id="polls" class="admin-section">
            <h2>–í—Å–µ –æ–ø—Ä–æ—Å—ã</h2>
            <div class="polls-list">
                <!-- –û–ø—Ä–æ—Å—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
            </div>
        </section>

        <!-- –°–æ–∑–¥–∞–Ω–∏–µ –æ–ø—Ä–æ—Å–∞ -->
        <section id="create-poll" class="admin-section">
            <h2>–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –æ–ø—Ä–æ—Å–∞</h2>
            <form id="pollForm">
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">–ù–∞–∑–≤–∞–Ω–∏–µ –æ–ø—Ä–æ—Å–∞ *</label>
                        <input type="text" class="form-input" id="pollTitle" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">–î–µ–¥–ª–∞–π–Ω</label>
                        <input type="date" class="form-input" id="pollDeadline">
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">–û–ø–∏—Å–∞–Ω–∏–µ –æ–ø—Ä–æ—Å–∞</label>
                    <textarea class="form-input" id="pollDescription" rows="3"></textarea>
                </div>

                <h3>–í–æ–ø—Ä–æ—Å—ã</h3>
                <div id="questionsList" class="questions-list">
                    <!-- –í–æ–ø—Ä–æ—Å—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –∑–¥–µ—Å—å -->
                </div>

                <button type="button" class="btn btn-secondary" onclick="addQuestion()">+ –î–æ–±–∞–≤–∏—Ç—å –≤–æ–ø—Ä–æ—Å</button>

                <div class="poll-navigation" style="margin-top: 2rem;">
                    <button type="button" class="btn-secondary" onclick="showSection('dashboard')">–û—Ç–º–µ–Ω–∞</button>
                    <button type="submit" class="btn">–°–æ–∑–¥–∞—Ç—å –æ–ø—Ä–æ—Å</button>
                </div>
            </form>
        </section>

        <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
        <section id="statistics" class="admin-section">
            <h2>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤</h2>
            <div class="form-group">
                <label class="form-label">–í—ã–±–µ—Ä–∏—Ç–µ –æ–ø—Ä–æ—Å –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏</label>
                <select class="form-input" id="pollSelect">
                    <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ –æ–ø—Ä–æ—Å --</option>
                </select>
            </div>
            <div id="pollStats">
                <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –∑–¥–µ—Å—å -->
            </div>
        </section>
    </main>

    <!-- –ü–æ–¥–≤–∞–ª -->
    <footer class="footer">
        <div class="copyright">
            <p>&copy; 2024 –°–∏–±–∏—Ä—Å–∫–∏–π –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω–¥—É—Å—Ç—Ä–∏–∞–ª—å–Ω—ã–π —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç | –ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</p>
        </div>
    </footer>

    <script>
        // –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
        let polls = JSON.parse(localStorage.getItem('polls')) || [];
        let currentQuestions = [];

        // –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Ä–∞–∑–¥–µ–ª–∞–º
        function showSection(sectionId) {
            document.querySelectorAll('.admin-section').forEach(section => {
                section.classList.remove('active');
            });
            document.querySelectorAll('.admin-nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            document.getElementById(sectionId).classList.add('active');
            event.target.classList.add('active');
        }

        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–∞
        function addQuestion() {
            const questionId = 'q' + Date.now();
            const questionHTML = `
                <div class="question-item" id="${questionId}">
                    <div class="question-header">
                        <strong>–ù–æ–≤—ã–π –≤–æ–ø—Ä–æ—Å</strong>
                        <button type="button" class="btn-danger btn-small" onclick="removeQuestion('${questionId}')">–£–¥–∞–ª–∏—Ç—å</button>
                    </div>
                    <div class="form-group">
                        <label class="form-label">–¢–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞ *</label>
                        <input type="text" class="form-input" name="questionText" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">–¢–∏–ø –≤–æ–ø—Ä–æ—Å–∞ *</label>
                        <select class="form-input" name="questionType" onchange="changeQuestionType('${questionId}', this.value)">
                            <option value="single">–û–¥–∏–Ω–æ—á–Ω—ã–π –≤—ã–±–æ—Ä</option>
                            <option value="multiple">–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –≤—ã–±–æ—Ä</option>
                            <option value="scale">–®–∫–∞–ª–∞ (1-5)</option>
                            <option value="text">–¢–µ–∫—Å—Ç–æ–≤—ã–π –æ—Ç–≤–µ—Ç</option>
                        </select>
                    </div>
                    <div class="options-list" id="options-${questionId}">
                        <div class="option-item">
                            <input type="text" class="form-input" placeholder="–í–∞—Ä–∏–∞–Ω—Ç –æ—Ç–≤–µ—Ç–∞" name="option">
                            <button type="button" class="btn-danger btn-small" onclick="removeOption(this)">√ó</button>
                        </div>
                    </div>
                    <button type="button" class="btn-secondary btn-small" onclick="addOption('${questionId}')">+ –î–æ–±–∞–≤–∏—Ç—å –≤–∞—Ä–∏–∞–Ω—Ç</button>
                </div>
            `;
            document.getElementById('questionsList').insertAdjacentHTML('beforeend', questionHTML);
        }

        // –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ç–∏–ø–∞ –≤–æ–ø—Ä–æ—Å–∞
        function changeQuestionType(questionId, type) {
            const optionsDiv = document.getElementById('options-' + questionId);
            if (type === 'text' || type === 'scale') {
                optionsDiv.innerHTML = '';
                if (type === 'scale') {
                    optionsDiv.innerHTML = `
                        <div class="option-item">–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —à–∫–∞–ª–∞ –æ—Ç 1 –¥–æ 5</div>
                    `;
                }
            } else {
                optionsDiv.innerHTML = `
                    <div class="option-item">
                        <input type="text" class="form-input" placeholder="–í–∞—Ä–∏–∞–Ω—Ç –æ—Ç–≤–µ—Ç–∞" name="option">
                        <button type="button" class="btn-danger btn-small" onclick="removeOption(this)">√ó</button>
                    </div>
                `;
            }
        }

        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç–∞ –æ—Ç–≤–µ—Ç–∞
        function addOption(questionId) {
            const optionsDiv = document.getElementById('options-' + questionId);
            const optionHTML = `
                <div class="option-item">
                    <input type="text" class="form-input" placeholder="–í–∞—Ä–∏–∞–Ω—Ç –æ—Ç–≤–µ—Ç–∞" name="option">
                    <button type="button" class="btn-danger btn-small" onclick="removeOption(this)">√ó</button>
                </div>
            `;
            optionsDiv.insertAdjacentHTML('beforeend', optionHTML);
        }

        // –£–¥–∞–ª–µ–Ω–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç–∞ –æ—Ç–≤–µ—Ç–∞
        function removeOption(button) {
            button.parentElement.remove();
        }

        // –£–¥–∞–ª–µ–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–∞
        function removeQuestion(questionId) {
            document.getElementById(questionId).remove();
        }

        // –°–æ–∑–¥–∞–Ω–∏–µ –æ–ø—Ä–æ—Å–∞
        document.getElementById('pollForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const poll = {
                id: 'poll' + Date.now(),
                title: document.getElementById('pollTitle').value,
                description: document.getElementById('pollDescription').value,
                deadline: document.getElementById('pollDeadline').value,
                created: new Date().toISOString(),
                questions: []
            };

            // –°–±–æ—Ä –≤–æ–ø—Ä–æ—Å–æ–≤
            document.querySelectorAll('.question-item').forEach(questionElem => {
                const question = {
                    text: questionElem.querySelector('[name="questionText"]').value,
                    type: questionElem.querySelector('[name="questionType"]').value,
                    options: []
                };

                // –°–±–æ—Ä –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –æ—Ç–≤–µ—Ç–æ–≤
                if (question.type !== 'text' && question.type !== 'scale') {
                    questionElem.querySelectorAll('[name="option"]').forEach(optionInput => {
                        if (optionInput.value.trim()) {
                            question.options.push(optionInput.value.trim());
                        }
                    });
                } else if (question.type === 'scale') {
                    question.options = ['1', '2', '3', '4', '5'];
                }

                poll.questions.push(question);
            });

            polls.push(poll);
            localStorage.setItem('polls', JSON.stringify(polls));
            
            alert('–û–ø—Ä–æ—Å —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω!');
            showSection('dashboard');
            this.reset();
            document.getElementById('questionsList').innerHTML = '';
        });

        // –í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã
        document.getElementById('logoutBtn').addEventListener('click', function(e) {
            e.preventDefault();
            if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –≤—ã–π—Ç–∏?')) {
                window.location.href = 'index.html';
            }
        });

        // –ó–∞–≥—Ä—É–∑–∫–∞ –æ–ø—Ä–æ—Å–æ–≤ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', function() {
            updatePollsList();
        });

        function updatePollsList() {
            const pollsList = document.querySelector('#polls .polls-list');
            pollsList.innerHTML = '';
            
            polls.forEach(poll => {
                const pollHTML = `
                    <div class="poll-item">
                        <div>
                            <strong>${poll.title}</strong>
                            <div> ${poll.questions.length} –≤–æ–ø—Ä–æ—Å–æ–≤ ‚Ä¢ –°–æ–∑–¥–∞–Ω ${new Date(poll.created).toLocaleDateString()}</div>
                        </div>
                        <div class="poll-actions">
                            <button class="btn btn-small" onclick="viewPoll('${poll.id}')">–ü—Ä–æ—Å–º–æ—Ç—Ä</button>
                            <button class="btn btn-secondary btn-small" onclick="editPoll('${poll.id}')">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
                            <button class="btn btn-danger btn-small" onclick="deletePoll('${poll.id}')">–£–¥–∞–ª–∏—Ç—å</button>
                        </div>
                    </div>
                `;
                pollsList.insertAdjacentHTML('beforeend', pollHTML);
            });
        }

        function viewPoll(pollId) {
            const poll = polls.find(p => p.id === pollId);
            if (poll) {
                alert(`–ü—Ä–æ—Å–º–æ—Ç—Ä –æ–ø—Ä–æ—Å–∞: ${poll.title}\n–í–æ–ø—Ä–æ—Å–æ–≤: ${poll.questions.length}`);
            }
        }

        function editPoll(pollId) {
            alert('–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø—Ä–æ—Å–∞ ' + pollId);
            // –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
        }

        function deletePoll(pollId) {
            if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –æ–ø—Ä–æ—Å?')) {
                polls = polls.filter(p => p.id !== pollId);
                localStorage.setItem('polls', JSON.stringify(polls));
                updatePollsList();
            }
        }
    </script>
</body>

</html>
